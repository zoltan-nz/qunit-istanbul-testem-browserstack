machine:
  timezone:
    Pacific/Auckland
  environment:
    SELENIUM_HOST: hub.browserstack.com
    SELENIUM_PORT: 80
    BS_AUTOMATE_PROJECT: "Run on circleCI"
    BS_AUTOMATE_BUILD: "build No. $CIRCLE_BUILD_NUM for circleCI"
    SELENIUM_PLATFORM: WINDOWS
    SELENIUM_BROWSER: firefox
    SELENIUM_VERSION: 30

dependencies:
  pre:
    - mv ./.browserstack ~/
    - sh ~/.browserstack/runthis.sh

  post:
    - npm install browserstack-cli -g
    - npm install testem -g
    - browserstack -t 360 tunnel localhost:<port>
        timeout: 360

test:
  override:
    - testem ci
